---
title: "CAP 정리 심층 분석: 고동시성 및 고가용성 분산 시스템 구축"
date: 2024-12-27
draft: false
description: "분산 시스템에서 CAP 정리의 응용에 대해 이론에서 실제까지 논의합니다."
summary: "분산 시스템에서 CAP 정리의 응용에 대해 이론에서 실제까지 논의합니다."
tags: [ "분산 시스템", "CAP 정리", "시스템 설계", "일관성 모델" ]
categories: [ "시스템 설계" , "분산 시스템" ]
---

## 1. CAP 정리

### 1.1 CAP 정리란 무엇인가

**CAP 정리**는 2000년 Eric Brewer가 제안한 것으로, 핵심 내용은 다음과 같습니다.

- **C(Consistency, 일관성)**: 시스템 내 모든 노드가 동일한 시점에 동일한 데이터를 보는 것을 의미합니다. 더 엄격하게 말하면, 클라이언트가 데이터를 읽을 때 어떤 복제본에서 읽든 결과는 최신 커밋된 데이터와 일치해야 합니다(일반적으로 강한 일관성/선형 일관성을 의미).
- **A(Availability, 가용성)**: 시스템에 부분적인 장애가 발생하더라도 정상적인 서비스를 제공할 수 있어야 하며, 모든 요청은 합리적인 시간 내에 "유효한 응답"(성공뿐만 아니라 올바른 실패 응답 포함)을 받아야 합니다.
- **P(Partition tolerance, 파티션 내성)**: 시스템은 네트워크 파티션(노드 간 통신이 불가능해지는 상황)을 견딜 수 있어야 하며, 네트워크 분할이 발생하더라도 시스템은 어느 정도의 가용성 또는 일관성을 제공할 수 있어야 합니다.

실제 분산 환경에서는 네트워크 파티션이 불가피하므로 **P**는 기본적으로 "필수 옵션"으로 간주됩니다. 네트워크 파티션이 발생하면 시스템은 모든 노드에 대한 데이터의 **강한 일관성**과 **고가용성**을 동시에 보장할 수 없으므로 C와 A 중에서 선택해야 하며, 그 결과 **CP**와 **AP**라는 두 가지 주요 유형이 파생됩니다.

### 1.2 CAP 정리의 한계

CAP 정리는 개념적 지침을 제공하는 상대적으로 높은 수준의 이론이며, **"C를 선택하거나 A를 선택해야 한다"고 단순하게 이해해서는 안 된다**는 점을 지적해야 합니다. 몇 가지 일반적인 오해가 있습니다.

1. **C가 반드시 강한 일관성을 의미하는 것은 아님**
   CAP 정리에서 C는 종종 가장 엄격한 의미의 일관성(즉, 선형 일관성)을 의미합니다. 그러나 실제 시스템에서는 약한 일관성, 읽기 커밋(Read Committed), 인과적 일관성(Causal Consistency) 등 다양한 세분화된 모델을 선택할 수 있습니다.
2. **가용성이 0 또는 1인 것은 아님**
   CP를 선택했다고 해서 가용성이 완전히 희생되는 것은 아니며, AP를 선택했다고 해서 일관성이 전혀 보장되지 않는 것도 아닙니다. 가용성과 일관성 모두 다양한 수준의 절충 공간과 다운그레이드 전략이 있습니다.
3. **최종 일관성**은 CAP를 위반하지 않음
   이는 매우 일반적인 절충안으로, 낮은 쓰기 일관성을 통해 더 높은 가용성과 처리량을 얻고, 백그라운드에서 비동기 방식으로 데이터를 수렴합니다.

따라서 CAP 정리는 다양한 **일관성 모델**, **고가용성 아키텍처 패턴**과 함께 구체적인 시나리오에 적용해야 진정한 실질적인 지침 가치를 창출할 수 있습니다.

------

## 2. 분산 시스템의 일관성 모델

일관성 모델의 분류는 매우 다양하지만, 일반적인 주류 모델은 **강한 일관성**과 **약한 일관성**(최종 일관성, 인과적 일관성 등 포함)으로 나눌 수 있습니다. 이 문서에서는 주로 **강한 일관성**과 **최종 일관성**을 소개하고, CP 또는 AP 모드에서 이들이 어떻게 사용되는지 설명합니다.

### 2.1 강한 일관성

**강한 일관성(Strong Consistency)** 또는 **선형 일관성(Linearizability)**은 쓰기 작업이 성공적으로 완료되어 반환되면 이후의 모든 읽기 작업에서 해당 업데이트 내용을 읽을 수 있음을 의미합니다. 즉, 시스템은 모든 작업을 직렬로 실행한 것처럼 동작합니다.

- **일반적인 구현**: 동기 복제와 중재(다수파) 메커니즘에 의존하며, 프로토콜(예: Paxos/Raft)을 통해 시스템에 유효한 리더(Leader)가 하나만 있는지 확인하고, 모든 작업은 순서대로 로그에 기록되어 다수 노드로 복제됩니다.
- 장단점:
    - 장점: 가장 엄격한 데이터 정확성을 보장하며, 언제든 읽는 데이터가 "롤백"되지 않습니다.
    - 단점: 네트워크 불안정, 파티션 또는 리더 장애 시 일관성을 유지하기 위해 쓰기 작업이 차단되어 전체 가용성이 저하될 수 있으며, 성능과 처리량도 상대적으로 낮습니다.

### 2.2 최종 일관성

**최종 일관성(Eventual Consistency)**은 약한 일관성의 대표적인 형태로, 시스템에 더 이상 새로운 업데이트 작업이 없으면 시간이 지남에 따라 모든 복제본의 데이터가 점차 동일한 상태로 수렴되는 것을 요구합니다. 그동안 사용자가 복제본 데이터를 읽으면 오래된 값을 볼 수 있지만, 결국에는 일관성이 유지됩니다.

- **일반적인 구현**: Gossip 프로토콜, 다중 복제본 비동기 복제, CRDT(Conflict-free Replicated Data Type) 등.
- 장단점:
    - 장점: 고가용성, 고처리량, 쓰기 작업 지연 시간이 짧고, 네트워크 파티션에 대한 내성이 높습니다.
    - 단점: 짧은 시간 동안의 데이터 불일치를 허용해야 하며, 애플리케이션 로직이 더 복잡하고, 충돌 감지 및 병합을 수행해야 할 수 있습니다.

------

## 3. 일반적인 일관성 프로토콜 및 알고리즘

분산 시스템 복제본 간의 일관성을 유지하기 위해 업계에서는 다양한 고전적인 알고리즘과 프로토콜을 제안했습니다. 다음은 몇 가지를 간략하게 소개합니다.

### 3.1 Paxos

Paxos는 Leslie Lamport가 1990년대에 제안한 분산 일관성 알고리즘으로, 주로 강한 일관성 또는 선형 일관성을 구현하는 데 사용됩니다.

- **기본 원리**: 역할 분할(제안자 Proposer, 수락자 Acceptor, 학습자 Learner)을 통해 여러 번의 투표를 거쳐 작업 또는 값이 다수 노드에서 수락되는지 여부를 결정합니다.
- 장단점:
    - 장점: 네트워크 파티션, 노드 장애 시에도 일관성을 달성할 수 있으며, 보안성이 매우 높습니다.
    - 단점: 구현이 복잡하고, 디버깅 및 문제 해결이 어렵고, 여러 번의 투표로 인해 성능이 제한됩니다. 산업계에서는 변형된 형태(Multi-Paxos 등)를 많이 사용합니다.

### 3.2 Raft

Raft는 2013년에 공식적으로 제안되었으며, **Paxos와 동일한 보안성을 보장하면서 구현 및 이해 난이도를 단순화**하는 것을 목표로 합니다. 안정적인 **리더(Leader)** 역할을 설정하여 중앙 집중식으로 로그 복제 및 장애 복구를 수행합니다.

- **주요 단계**: 리더 선출(Leader Election), 로그 복제(Log Replication), 안전성(Safety) 등.
- **일반적인 응용**: Etcd, Consul, TiKV, LogCabin 등은 Raft를 기반으로 강한 일관성 복제를 구현합니다.
- 장단점:
    - 장점: 상대적으로 이해하기 쉽고, 구현 코드량이 적으며, 중소 규모 클러스터에서 성능이 좋습니다.
    - 단점: 주 노드(리더)에 의존하며, 주 노드 장애 또는 파티션으로 인해 일시적인 쓰기 차단이 발생할 수 있습니다. 대규모 클러스터 또는 지역 간 배포 시 지연 시간과 가용성이 영향을 받을 수 있습니다.

### 3.3 Gossip 프로토콜

Gossip(가십) 프로토콜은 전통적인 합의 프로토콜이 아니며, 주로 탈중앙화된 시나리오에서 노드 간의 무작위 상호 작용을 통해 메타데이터 또는 상태 정보를 교환하여 전체 네트워크에 확산 및 수렴하는 데 사용됩니다.

- **특징**: 탈중앙화, 낮은 오버헤드, 노드 간 주기적이고 무작위적인 메시지 교환.
- **일반적인 응용**: Cassandra, Riak, 분산 멤버 관리(예: Serf) 등에서 최종 일관성, 복제본 상태 동기화 등을 구현하는 데 사용됩니다.
- 장단점:
    - 장점: 확장성이 뛰어나고, 구현이 간단하며, 일관성 요구 사항이 높지 않고 확장성 요구 사항이 높은 시나리오에 적합합니다.
    - 단점: 일관성 보장이 약하며, 충돌을 최종적으로 해결하기 위해 더 높은 수준의 충돌 처리 수단(예: CRDT, 버전 번호 병합 등)이 필요합니다.

### 3.4 2PC / 3PC

분산 트랜잭션 시나리오에서 일반적인 커밋 프로토콜은 **2PC(Two-phase Commit)**와 **3PC(Three-phase Commit)**입니다.

- **2PC**: 코디네이터가 모든 참여자에게 "준비(prepare)"를 알리고, 모두 성공하면 "커밋(commit)"을 브로드캐스트하고, 그렇지 않으면 "롤백(abort)"합니다.
- **3PC**: 2PC에 단계를 추가하여 단일 지점 장애로 인한 차단을 줄이지만, 구현이 더 복잡하고, 여전히 극단적인 네트워크 파티션 또는 장애 시나리오에서 사용할 수 없는 문제가 있습니다.
- 장단점:
    - 장점: 이해하기 쉽고, 트랜잭션 의미가 명확하며, 분산 데이터베이스, 메시지 큐 등에서 널리 사용됩니다.
    - 단점: 코디네이터에 대한 의존성이 강하고, 차단 위험이 있으며, 네트워크 파티션이 장시간 지속되면 트랜잭션을 계속 진행할 수 없습니다.

------

## 4. CAP의 두 가지 주요 선택: CP와 AP

**P**가 "필수" 속성으로 간주되면 분산 시스템은 네트워크 파티션 시에도 계속 서비스를 제공하려면 **C**와 **A** 중에서 선택해야 합니다. 따라서 일반적인 시스템 설계는 **CP**와 **AP**라는 두 가지 주요 진영으로 나뉩니다.

### 4.1 CP 시스템

**CP(Consistency + Partition tolerance)**: 네트워크 파티션이 발생하면 시스템은 **일관성을 우선적으로 보장**하고, 필요한 경우 **가용성을 희생**합니다.

- 일반적인 구현:
    - 다수파 합의(Paxos, Raft 등), 과반수 노드가 활성화되어 합의에 도달해야 쓰기가 허용됩니다.
    - 현재 쿼럼(법정 인원)에 도달할 수 없거나 주 노드에 장애가 발생하면 시스템은 쓰기 작업을 차단하거나 거부하여 데이터 불일치를 유발하는 브레인 스플릿을 방지합니다.
- 일반적인 응용:
    - Zookeeper, Etcd, Consul, 분산 잠금 서비스, 분산 메타데이터 관리 등.
    - 금융 거래 핵심 프로세스, 은행 회계 시스템 등 높은 일관성이 요구되는 시나리오.
- 특징:
    - 엄격한 데이터 보장: 시스템이 중단되더라도 이중 주체 또는 데이터 혼란이 발생하지 않습니다.
    - 일정 수준의 가용성 희생: 네트워크 파티션 또는 장애 조치 시 서비스가 일시적으로 사용할 수 없거나 쓰기 작업을 거부하는 기간이 있습니다.

### 4.2 AP 시스템

**AP(Availability + Partition tolerance)**: 네트워크 파티션이 발생하면 시스템은 **가용성을 우선적으로 보장**하고, 동시에 **일관성을 완화**합니다.

- 일반적인 구현:
    - 최종 일관성, 다중 주체 복제, Gossip 프로토콜, Dynamo 스타일의 조정 가능한 일관성 정책 등.
- 일반적인 응용:
    - NoSQL 데이터베이스(Cassandra, Riak, DynamoDB 등), 분산 캐시 시스템(Redis Cluster) 등.
    - 소셜 네트워크, 로그 수집, 추천 시스템 등 고가용성, 고처리량이 필요하고 데이터 일관성 요구 사항이 상대적으로 낮은 비즈니스.
- 특징:
    - 파티션이 발생하더라도 모든 노드가 읽기 및 쓰기 요청을 계속 수신하여 시스템이 "가능한 한 사용 가능"하도록 보장합니다.
    - 데이터에 일시적인 불일치가 있을 수 있지만, 비동기 동기화, 충돌 병합 등의 방식으로 백그라운드에서 점진적으로 수렴됩니다.

------

## 5. CP와 AP 중에서 어떻게 선택해야 할까요?

실제 대규모 분산 시스템에서는 **단일 모델에만 의존하는 경우는 거의 없으며**, 다양한 데이터 또는 비즈니스 시나리오에 대해 계층적으로 처리하여 **일관성**과 **가용성**의 최적 균형을 추구합니다.

1. **핵심 데이터는 CP 선택**
    - 사용자 계정 잔액, 주문 결제, 금융 거래 내역 등 일관성 요구 사항이 매우 높습니다.
    - 네트워크 불안정으로 인한 일시적인 쓰기 불가능을 허용하지만, 잔액 또는 거래 금액 오류는 허용할 수 없습니다.
2. **에지 또는 캐시 데이터는 AP 선택**
    - 상품 상세 페이지 캐시, 사용자 행동 로그, 추천 후보 목록 등 일관성 요구 사항이 낮습니다.
    - 고동시성, 고가용성을 더 중요하게 생각하며, 일정 시간의 지연 업데이트 또는 더티 리드를 허용할 수 있습니다.

많은 인터넷 기업에서 **혼합 아키텍처**를 채택합니다. 핵심 거래 프로세스에는 CP 스타일의 스토리지(예: 분산 관계형 데이터베이스 또는 강한 일관성을 갖는 분산 스토리지)를 사용하고, 주변 비즈니스 또는 "읽기 위주" 시나리오에는 AP 스타일의 스토리지 또는 캐시 솔루션을 사용합니다.

------

## 6. CP와 AP는 어떻게 고동시성과 최종 일관성을 구현할까요?

### 6.1 CP 시스템이 고동시성에 대처하는 방법

합의 프로토콜은 단일 클러스터 노드 규모와 쓰기 요청량이 많을 때 높은 지연 시간과 낮은 처리량에 직면할 수 있지만, 다음과 같은 방법으로 동시성과 확장성을 향상시킬 수 있습니다.

1. 일괄 읽기 및 쓰기
    - 여러 쓰기 작업을 클라이언트 또는 중간 계층에서 패키징하여 리더 노드에 한 번에 쓰기 작업을 수행하여 네트워크 왕복 및 프로토콜 라운드를 줄입니다.
2. 데이터베이스 분할 및 다중 클러스터
    - 데이터를 논리적 또는 해시 방식으로 여러 클러스터(샤딩)로 분할하고, 각 클러스터 내부에서 CP 프로토콜을 계속 실행합니다. 요청은 라우팅 또는 프록시 계층을 통해 다른 샤드로 분산됩니다.
    - 전체 동시성 기능을 향상시키고, 장애 영향을 단일 샤드 범위로 제한합니다.

> CP 시스템의 단일 샤드 클러스터 처리량은 AP 시스템보다 2~10배 낮은 경우가 많습니다.

### 6.2 AP 시스템이 최종 일관성을 보장하는 방법

AP 시스템은 일반적으로 높은 쓰기 처리량과 읽기 가용성을 제공할 수 있지만, 일관성을 완화하므로 백그라운드 또는 비즈니스 로직 계층에서 일관성 수렴을 보장해야 합니다.

1. 버전 번호(Vector Clock) 또는 논리 타임스탬프
    - 각 업데이트 작업에 버전 번호(또는 Lamport Clock / Hybrid Clock 기반)를 할당하고, 충돌 시나리오에서 병합하거나 타임스탬프 기반 승리 전략(Last Write Wins)을 사용합니다.
2. Gossip 프로토콜 / 반엔트로피(Anti-entropy) 메커니즘
    - 노드가 주기적으로 최신 데이터 또는 메타데이터를 교환하고, 충돌이 발견되면 병합합니다.
3. 조정 가능한 일관성 정책
    - Dynamo 모델을 대표적으로, 클라이언트는 `R`, `W` 등의 매개변수(예: 다수파 쓰기, 복제본 확인)를 구성하여 일관성과 가용성 사이에서 유연하게 조정할 수 있습니다.
4. 사용자 정의 충돌 해결 정책
    - 비즈니스 의미와 결합하여 병합합니다. 예를 들어, 장바구니는 "합집합"으로 병합하고, 카운터는 CRDT(G-counter, PN-counter 등)를 사용하여 데이터의 단조성을 보장합니다.

------

## 7. CP의 샤드 간 강한 일관성 구현

7장에서 언급했듯이, **데이터베이스 분할(샤딩)**을 통해 단일 CP 클러스터의 부하를 여러 하위 클러스터로 "분할"하여 더 높은 동시성을 지원할 수 있습니다. 그러나 비즈니스에서 샤드 간 트랜잭션(즉, 여러 데이터베이스 또는 테이블 업데이트 관련)을 실행해야 하는 경우 여전히 **다중 샤드 일관성** 문제가 발생합니다. 일반적으로 다음과 같은 접근 방식이 있습니다.

1. **분산 트랜잭션: 2PC / 3PC**
    - 애플리케이션에서 여러 샤드에 걸쳐 원자적 업데이트를 수행해야 하는 경우 일반적으로 분산 트랜잭션 프로토콜(예: 2PC, 3PC)을 사용하여 각 샤드의 커밋 또는 롤백을 조정합니다.
    - 문제 및 해결 방법:
        - 2PC/3PC는 모두 코디네이터 노드에 의존하므로 단일 지점 병목 현상이 될 수 있습니다.
        - 네트워크 파티션이 심각하거나 코디네이터에 장애가 발생한 극단적인 상황에서는 차단이 발생할 수 있습니다.
        - 일반적으로 주/종속 전환, 하트비트 감지 및 시간 초과 메커니즘, 멱등 재시도, MVCC 등을 통해 차단 영향과 데이터 불일치 위험을 줄입니다.
2. **셀 기반 아키텍처**
    - 비즈니스를 여러 자율 셀로 분할하고, 각 셀 내의 데이터는 동일한 샤드 집합에 있으므로 대부분의 트랜잭션이 단일 셀에서 완료되도록 하여 샤드 간 작업을 줄입니다.
    - 셀 경계에서 비동기 또는 최종 일관성 메커니즘을 사용하여 데이터 교환을 수행하여 전체 고가용성과 일관성을 모두 고려합니다.
3. **글로벌 분산 데이터베이스 + 글로벌 합의 프로토콜**
    - 예를 들어 Google Spanner는 각 샤드에서 Paxos를 통해 복제본 강한 일관성 복제를 구현하고, TrueTime API를 사용하여 글로벌 타임스탬프를 제공하여 샤드 간 일관성을 보장합니다.
    - 이 솔루션은 구현 복잡성이 매우 높지만, 글로벌 범위에서 강한 일관성에 가까운 분산 트랜잭션 기능을 제공할 수 있습니다.

> **요약**: 강한 일관성이 엄격하게 요구되는 샤드 간 트랜잭션의 경우 **2PC/3PC + 코디네이터**가 여전히 일반적인 솔루션이며, 코디네이터의 고가용성을 최대한 높여 장애 가능성을 줄입니다. 그러나 엔지니어링 실무에서는 샤드 간 쓰기 작업을 최대한 줄이거나 셀 기반 접근 방식을 통해 대부분의 트랜잭션을 단일 샤드 범위로 제한하여 시스템 복잡성을 줄여야 합니다.

------

## 8. 유명 사례 논의

다음은 업계에서 자주 언급되는 몇 가지 분산 시스템을 간략하게 살펴보고, CAP에서 이들이 어떻게 선택하고 구현하는지 살펴보겠습니다.

1. **Google Spanner**
    - 전형적인 **CP** 시스템(심지어 외부에서 흔히 말하는 "CA" 환상을 만들 수 있지만, 실제로는 여전히 일부 가용성을 희생해야 함).
    - TrueTime에서 제공하는 외부 정확한 타임스탬프와 각 샤드 내부의 Paxos 복제를 사용하여 데이터 센터 간의 강한 일관성을 보장합니다.
    - 글로벌 금융 거래 또는 높은 일관성 요구 사항 시나리오에 적합하지만, 인프라 비용이 매우 높습니다.
2. **BigTable / HBase**
    - 겉으로는 **CP**에 더 가깝고, RegionServer와 Master 간에 분산 조정을 통해 메타데이터의 일관성을 보장합니다.
    - 그러나 실제 읽기 및 쓰기 경로에서도 다중 복제본 비동기 복제를 통해 일정 수준의 고가용성 수단을 제공할 수 있으며, 읽기 일관성은 애플리케이션 요구 사항에 따라 조정할 수 있습니다.
3. **AWS DynamoDB**
    - **AP**를 지향하며, 초기 설계는 Dynamo 논문에서 영감을 얻었으며, `R`, `W` 등의 매개변수를 통해 일관성 수준을 조정할 수 있습니다.
    - 기본 모드에서는 매우 높은 가용성과 최종 일관성을 제공하며, "강한 일관성 읽기"를 활성화할 수도 있습니다(단, 단일 파티션의 강한 일관성만 보장하며, 파티션 간에는 보장하지 않음).
4. **Cassandra**
    - 마찬가지로 **AP**를 지향하며, 기본적으로 Gossip 프로토콜을 사용하여 노드 토폴로지 상태를 유지합니다.
    - 읽기 및 쓰기 일관성은 읽기 및 쓰기 복제본 수 `R` / `W`를 구성하여 최종 일관성에서 더 강한 일관성으로 원활하게 전환할 수 있습니다.

> **비교를 통해 알 수 있듯이**: 엔지니어링에는 절대적인 "AP 또는 CP"가 없으며, 다양한 일관성 전략이 혼합되어 있습니다. 대부분의 시스템은 다양한 애플리케이션 시나리오에 맞게 일정 수준의 조정 가능한 일관성을 제공합니다.

------

## 9. 결론

1. **CAP 정리는 일률적인 것이 아님**
    - 실제 분산 시스템에서는 "C를 선택하고 A를 포기한다"거나 "A를 선택하고 C를 포기한다"고 단순하게 말할 수 없습니다.
    - 업계에서는 다양한 데이터 차원, 다양한 작업 유형에 따라 **CP** 또는 **AP** 모드를 유연하게 선택하거나, 심지어 동일한 시스템 내에서 다른 테이블/다른 기능에 대해 다른 내결함성 및 일관성 전략을 채택하는 것이 더 일반적입니다.
2. **AP가 절대적으로 100% 사용 가능한 것은 아님**
    - 예를 들어, Cassandra, DynamoDB 등도 극단적인 네트워크 파티션 또는 노드 대규모 장애 시 요청을 충족할 수 없는 상황이 발생할 수 있습니다.
    - AP 시스템은 설계상 "복제본을 쓸 수 있으면 먼저 쓴다"는 경향이 있으며, 상대적으로 더 높은 가용성과 처리량을 얻기 위해 일부 일관성 보장을 희생합니다.
3. **CP도 최대한 고가용성을 달성할 수 있음**
    - Paxos/Raft는 정상적인 상황에서도 99.99% 이상의 가용성을 제공할 수 있지만, 더 많은 네트워크, 하드웨어 및 엔지니어링 비용이 필요하며, 극단적인 네트워크 파티션 시에는 여전히 쓰기 차단이 발생하고 일관성을 유지하기 위해 가용성을 희생합니다.
4. **혼합 아키텍처가 주류임**
    - 핵심 거래 시나리오에서는 강한 일관성(CP)을 유지하고, 주변 보조 시나리오 또는 캐시 채널에서는 약한 일관성(AP)을 채택하여 서로 협력합니다.
    - 비즈니스 허용 범위, 네트워크 환경, 비용 투자, 팀 기술 역량을 종합적으로 고려하여 선택해야 합니다.

CAP 정리는 분산 시스템 설계에 대한 높은 수준의 사고 프레임워크를 제공하여 네트워크 파티션이라는 불가피한 현실에 직면했을 때 합리적인 결정을 내리는 데 도움이 됩니다. 실제 시스템에서는 더 풍부한 **일관성 모델**, **합의 프로토콜**, **다중 복제본 복제 메커니즘** 및 엔지니어링 실무(재해 복구, 다운그레이드, 멱등성, 충돌 병합 등)를 통해 일관성과 가용성의 균형을 맞춰야 합니다.